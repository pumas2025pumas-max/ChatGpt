<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estudio Meraki | Contacto</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Work+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header class="hero">
        <div class="hero__background" aria-hidden="true"></div>
        <div class="hero__content">
            <img class="hero__logo" src="assets/logo-meraki.svg" alt="Logotipo de Estudio Meraki" width="200" height="200">
            <p class="hero__eyebrow">Estudio Meraki</p>
            <h1 class="hero__title">Soluciones legales y contables con un enfoque humano</h1>
            <p class="hero__subtitle">Acompa√±amos a emprendedores, pymes y particulares brindando asesoramiento integral y cercano.</p>
            <div class="hero__cta">
                <a class="button button--light" href="https://wa.me/5491162576017" target="_blank" rel="noopener">Escr√≠benos por WhatsApp</a>
                <a class="button button--ghost" href="#contacto">Enviar consulta</a>
            </div>
        </div>
    </header>

    <main>
        <section id="contacto" class="contact" aria-labelledby="contacto-titulo">
            <div class="contact__intro">
                <h2 id="contacto-titulo">Conversemos sobre tu caso</h2>
                <p>Completa el formulario o utiliza cualquiera de los medios de contacto para agendar una reuni√≥n virtual o presencial con nuestro equipo.</p>
            </div>

            <div class="contact__grid">
                <div class="contact__card" aria-label="Datos de contacto">
                    <h3>Informaci√≥n de contacto</h3>
                    <ul class="contact__list">
                        <li>
                            <span class="contact__label">Tel√©fono</span>
                            <a href="tel:+5491162576017">+54 9 11 6257-6017</a>
                        </li>
                        <li>
                            <span class="contact__label">WhatsApp</span>
                            <a href="https://wa.me/5491162576017" target="_blank" rel="noopener">Enviar mensaje directo</a>
                        </li>
                        <li>
                            <span class="contact__label">Correo</span>
                            <a href="mailto:ejcmeraki@gmail.com">ejcmeraki@gmail.com</a>
                        </li>
                        <li>
                            <span class="contact__label">Modalidad</span>
                            <p>Consultas online y reuniones presenciales a coordinaci√≥n previa.</p>
                        </li>
                    </ul>
                    <p class="contact__note">Compartinos la mayor cantidad de informaci√≥n posible para brindarte una respuesta √°gil y precisa.</p>
                </div>

                <form class="contact__form" aria-label="Formulario de contacto">
                    <div class="form__group">
                        <label for="nombre">Nombre completo</label>
                        <input type="text" id="nombre" name="nombre" placeholder="Ej. Laura Gonz√°lez" required>
                    </div>
                    <div class="form__group">
                        <label for="email">Correo electr√≥nico</label>
                        <input type="email" id="email" name="email" placeholder="ejemplo@correo.com" required>
                    </div>
                    <div class="form__group">
                        <label for="telefono">Tel√©fono de contacto</label>
                        <input type="tel" id="telefono" name="telefono" placeholder="Ej. +54 9 11 6257-6017">
                    </div>
                    <div class="form__group form__group--full">
                        <label for="asunto">Asunto</label>
                        <input type="text" id="asunto" name="asunto" placeholder="Servicio o √°rea de inter√©s">
                    </div>
                    <div class="form__group form__group--full">
                        <label for="mensaje">Mensaje</label>
                        <textarea id="mensaje" name="mensaje" rows="5" placeholder="Contanos brevemente tu consulta"></textarea>
                    </div>
                    <p class="form__help">Respondemos dentro de las pr√≥ximas 24 horas h√°biles.</p>
                    <button type="submit" class="button">Enviar consulta</button>
                </form>
            </div>
        </section>

        <section class="highlights" aria-labelledby="servicios-titulo">
            <div class="highlights__card">
                <h2 id="servicios-titulo">¬øC√≥mo podemos ayudarte?</h2>
                <ul>
                    <li>Constituci√≥n y regularizaci√≥n de sociedades, monotributo y pymes.</li>
                    <li>Asesoramiento contable e impositivo para emprendimientos en crecimiento.</li>
                    <li>Contratos comerciales, laborales y representaci√≥n legal integral.</li>
                </ul>
            </div>
            <div class="highlights__card">
                <h3>Metodolog√≠a Meraki</h3>
                <p>Creemos en la escucha activa, el an√°lisis detallado y la comunicaci√≥n clara para que tomes decisiones informadas. Cada estrategia se dise√±a a medida y se acompa√±a con seguimiento constante.</p>
            </div>
        </section>
    </main>

    <footer class="footer">
        <p>&copy; <span id="year"></span> Estudio Meraki. Todos los derechos reservados.</p>
        <p class="footer__legal">La informaci√≥n de este sitio es meramente orientativa y no reemplaza el asesoramiento profesional personalizado.</p>
    </footer>

    <button class="chatbot__toggle" type="button" aria-controls="chatbot" aria-expanded="false">
        <span class="chatbot__toggle-icon" aria-hidden="true">üí¨</span>
        <span class="chatbot__toggle-text">Asistente</span>
    </button>

    <div id="chatbot" class="chatbot chatbot--closed" role="dialog" aria-modal="false" aria-label="Asistente virtual de Estudio Meraki">
        <div class="chatbot__header">
            <div class="chatbot__heading">
                <p class="chatbot__eyebrow">Asistente virtual</p>
                <h2 class="chatbot__title">Meraki Chat</h2>
            </div>
            <button type="button" class="chatbot__close" aria-label="Cerrar chat">&times;</button>
        </div>
        <div class="chatbot__messages" role="log" aria-live="polite"></div>
        <form class="chatbot__form" autocomplete="off">
            <label class="visually-hidden" for="chatbot-input">Escribe tu consulta</label>
            <div class="chatbot__suggestions" aria-label="Preguntas r√°pidas">
                <button type="button" class="chatbot__suggestion" data-message="¬øCu√°l es el horario?">¬øCu√°l es el horario?</button>
                <button type="button" class="chatbot__suggestion" data-message="Contacto por WhatsApp">Contacto por WhatsApp</button>
                <button type="button" class="chatbot__suggestion" data-message="¬øQu√© servicios ofrecen?">¬øQu√© servicios ofrecen?</button>
            </div>
            <div class="chatbot__controls">
                <input id="chatbot-input" class="chatbot__input" type="text" name="mensaje" placeholder="Escrib√≠ tu consulta..." required>
                <button type="submit" class="chatbot__send">Enviar</button>
            </div>
        </form>
    </div>

    <script>
        const yearElement = document.getElementById('year');
        const currentYear = new Date().getFullYear();
        yearElement.textContent = currentYear;

        const chatbotToggle = document.querySelector('.chatbot__toggle');
        const chatbotElement = document.getElementById('chatbot');
        const chatbotCloseButton = document.querySelector('.chatbot__close');
        const chatbotForm = document.querySelector('.chatbot__form');
        const chatbotInput = document.querySelector('.chatbot__input');
        const chatbotMessages = document.querySelector('.chatbot__messages');
        const suggestionButtons = document.querySelectorAll('.chatbot__suggestion');

        const knowledgeBase = [
            {
                keywords: ['telefono', 'tel√©fono', 'whatsapp', 'llamar', 'celular'],
                answer: 'Pod√©s comunicarte al +54 9 11 6257-6017 por llamada o WhatsApp para recibir asesoramiento inmediato.'
            },
            {
                keywords: ['correo', 'mail', 'email'],
                answer: 'Escribinos a ejcmeraki@gmail.com y te responderemos dentro de las pr√≥ximas 24 horas h√°biles.'
            },
            {
                keywords: ['horario', 'hora', 'cuando', 'disponible'],
                answer: 'Nuestro equipo responde consultas de lunes a viernes de 9 a 18 h (GMT-3).'
            },
            {
                keywords: ['reunion', 'presencial', 'virtual', 'ubicacion', 'direccion'],
                answer: 'Agendamos reuniones virtuales y presenciales con coordinaci√≥n previa en Ciudad de Buenos Aires.'
            },
            {
                keywords: ['servicios', 'areas', 'ofrecen', 'ayuda', 'especialidad'],
                answer: 'Asistimos en constituci√≥n de sociedades, gesti√≥n contable, impuestos y representaci√≥n legal integral para emprendedores y pymes.'
            },
            {
                keywords: ['honorarios', 'costo', 'precio', 'tarifa'],
                answer: 'Determinamos los honorarios seg√∫n el alcance del caso. Contanos m√°s detalles y te enviaremos una propuesta a medida.'
            },
            {
                keywords: ['documentacion', 'documentos', 'informacion', 'datos'],
                answer: 'Pod√©s adjuntar documentaci√≥n relevante cuando coordinemos la reuni√≥n o enviarla por correo seguro para agilizar el an√°lisis.'
            },
            {
                keywords: ['gracias', 'gracias!'],
                answer: '¬°Gracias a vos por escribirnos! ¬øHay algo m√°s en lo que podamos ayudarte?'
            }
        ];

        function normalize(text) {
            return text
                .toLowerCase()
                .normalize('NFD')
                .replace(/[\u0300-\u036f]/g, '');
        }

        function toggleChat(forceOpen) {
            const shouldOpen = forceOpen !== undefined ? forceOpen : chatbotElement.classList.contains('chatbot--closed');

            if (shouldOpen) {
                chatbotElement.classList.add('chatbot--open');
                chatbotElement.classList.remove('chatbot--closed');
                chatbotToggle.setAttribute('aria-expanded', 'true');
                chatbotToggle.classList.add('chatbot__toggle--active');
                chatbotInput.focus();
            } else {
                chatbotElement.classList.remove('chatbot--open');
                chatbotElement.classList.add('chatbot--closed');
                chatbotToggle.setAttribute('aria-expanded', 'false');
                chatbotToggle.classList.remove('chatbot__toggle--active');
            }
        }

        function addMessage(text, sender) {
            const bubble = document.createElement('div');
            bubble.className = `chatbot__bubble chatbot__bubble--${sender}`;
            const paragraph = document.createElement('p');
            paragraph.textContent = text;
            bubble.appendChild(paragraph);
            chatbotMessages.appendChild(bubble);
            chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
        }

        function getResponse(message) {
            const normalizedMessage = normalize(message);

            for (const entry of knowledgeBase) {
                const hasMatch = entry.keywords.some((keyword) => normalizedMessage.includes(normalize(keyword)));
                if (hasMatch) {
                    return entry.answer;
                }
            }

            return 'Gracias por tu consulta. Para brindarte la mejor respuesta, contanos m√°s detalles o escribinos a ejcmeraki@gmail.com.';
        }

        function processUserMessage(message) {
            if (!message) {
                return;
            }

            addMessage(message, 'user');

            window.requestAnimationFrame(() => {
                const response = getResponse(message);
                setTimeout(() => addMessage(response, 'bot'), 350);
            });
        }

        function handleSubmit(event) {
            event.preventDefault();
            const userMessage = chatbotInput.value.trim();

            if (!userMessage) {
                return;
            }

            chatbotInput.value = '';
            processUserMessage(userMessage);
        }

        chatbotToggle.addEventListener('click', () => {
            const isClosed = chatbotElement.classList.contains('chatbot--closed');
            toggleChat(isClosed);
            if (isClosed && chatbotMessages.childElementCount === 0) {
                addMessage('¬°Hola! Soy el asistente virtual de Estudio Meraki. Contame c√≥mo podemos ayudarte.', 'bot');
            }
        });

        chatbotCloseButton.addEventListener('click', () => toggleChat(false));

        chatbotForm.addEventListener('submit', handleSubmit);

        suggestionButtons.forEach((button) => {
            button.addEventListener('click', () => {
                const suggestedMessage = button.dataset.message?.trim();
                processUserMessage(suggestedMessage);
                chatbotInput.focus();
            });
        });

        document.addEventListener('keydown', (event) => {
            if (event.key === 'Escape' && chatbotElement.classList.contains('chatbot--open')) {
                toggleChat(false);
            }
        });
    </script>
</body>
</html>
